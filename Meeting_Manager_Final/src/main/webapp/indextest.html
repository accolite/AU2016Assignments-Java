<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="utf-8">
    <title>AngularJS Routing</title>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/nganimateview.css" rel="stylesheet">

    <script>
        $('ul.nav li.dropdown').hover(function() {
            $(this).find('.dropdown-menu').stop(true, true).delay(0).fadeIn(500);
        }, function() {
            $(this).find('.dropdown-menu').stop(true, true).delay(0).fadeOut(500);
        });
    </script>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-route.min.js"></script>
    <script src="bower_components/angular-animate.min.js"></script>
    <script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
    <script src="bower_components/lodash/lodash.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>

    <script src="bower_components/chart/dist/Chart.min.js"></script>
    <script src="bower_components/angular-chart/dist/angular-chart.min.js"></script>
    <!-- <script src="bower_components/chart/dist/Chart.min.js"></script> -->
    <meta name="google-signin-client_id" content="470545844187-r537672q0jbi3sioe2t28qpiflid6cmb.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
    <script>
        function onLoad() {
            gapi.load('auth2', function() {
                gapi.auth2.init();
            });
        }

        function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function() {
                invalidateServerSession();
                location.href = "/SpringAU2016Demo/login.html";

            })

            function getNewXmlHttp() {
                var xmlhttp;
                if (window.XMLHttpRequest) {
                    xmlhttp = new XMLHttpRequest();
                } else {
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                return xmlhttp;
            }

            function invalidateServerSession() {
                var xmlhttp = getNewXmlHttp();
                xmlhttp.onreadystatechange = function() {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        var text = xmlhttp.responseText;
                        console.log("hello");
                    }
                }
                xmlhttp.open("GET", "SignOut", true);
                xmlhttp.send();
            }
        }
    </script>
</head>

<body>
    <div ng-app="library">

        <div class="row" ng-controller="appController">


            <div class="container">
                <div class="row well" style="background-color:#2c3e50">
                    <div class="" style="text-align:center;">
                        <h3 style="font-weight:bold;color:white;">Welcome, <span id="user"> </span> </h3>
                    </div>

                </div>


                <!--http://getbootstrap.com/components/#navbar-->
                <div class="body-wrap" style="margin-left:-15px;">
                    <div class="container">
                        <nav class="navbar navbar-inverse" role="navigation" style="background-color:#2c3e50">
                            <div class="container-fluid">

                                <div class="navbar-header" style="color:white">

                                    <a class="navbar-brand active" href="#/trainer">Home</a>
                                </div>
                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="color:white">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#/trainer" class="dropdown-toggle" data-toggle="dropdown">Trainer <b class="caret"></b></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="#/trainer/inviteTrainee">Invite Trainee</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li><a href="#/trainer/sendNotification">Send Notification</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li><a href="#/trainer/trainerPoll">Create Poll</a>
                                                </li>


                                            </ul>
                                        </li>

                                        <li class="dropdown">
                                            <a href="#/trainee" class="dropdown-toggle" data-toggle="dropdown">Trainee <b class="caret"></b></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="#/trainee/TraineeFeedbacktest">Trainee Feedback</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li><a href="#/trainee/traineePoll">Trainee Poll</a>
                                                </li>


                                            </ul>
                                        </li>


                                        <li class="dropdown" style="visibility:hidden" id="create">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin <b class="caret"></b></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="#/admin/createNewSessiontest">Create Session</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li><a href="#/admin/FeedbackManagerAdmin">Feedback Manager</a>
                                                </li>


                                            </ul>
                                        </li>
                                    </ul>

                                    <ul class="nav navbar-nav navbar-right">
                                        <li>
                                            <button type="button" class="btn btn-danger" style="margin-top:.5em" onclick="signOut()">Logout</button>
                                        </li>
                                    </ul>
                                    </li>
                                    </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                            </div>
                            <!-- /.container-fluid -->
                        </nav>
                    </div>
                </div>


                <input type="hidden" id="username" value="smruti">
                <input type="hidden" id="SessionID" value="4">
                <input type="hidden" id="role" value="admin">
                <input type="hidden" id="email" value="smruti.charkha@accoliteindia.com"> </div>
            <ng-view>
            </ng-view>

        </div>


        <script type="text/javascript" src="apptest.js"></script>
</body>

</html>